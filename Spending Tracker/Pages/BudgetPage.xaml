<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Spending_Tracker.Pages.BudgetPage"
             Title="Bugete">

    <ScrollView>
        <VerticalStackLayout Padding="15" Spacing="15">
            
            <Label Text="Gestionare Bugete Lunare" 
                   FontSize="24" 
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   Margin="0,0,0,10"/>

            <Border Padding="15" StrokeShape="RoundRectangle 10" BackgroundColor="#F0F0F0">
                <VerticalStackLayout Spacing="10">
                    <Label Text="Categoria" FontSize="14" FontAttributes="Bold"/>
                    <Picker x:Name="CategoryPicker" 
                            Title="Selectează categoria"
                            FontSize="14"/>
                    
                    <Label Text="Buget Lunar (RON)" FontSize="14" FontAttributes="Bold" Margin="0,10,0,0"/>
                    <Entry x:Name="BudgetEntry" 
                           Placeholder="0.00"
                           Keyboard="Numeric"
                           FontSize="14"/>
                    
                    <Button Text="Salvează Buget"
                            Clicked="OnSaveBudgetClicked"
                            BackgroundColor="#512BD4"
                            TextColor="White"
                            Margin="0,10,0,0"
                            Padding="15,10"/>
                </VerticalStackLayout>
            </Border>

            <Label Text="Bugete Active" 
                   FontSize="18" 
                   FontAttributes="Bold"
                   Margin="0,10,0,5"/>

            <CollectionView x:Name="BudgetsCollectionView"
                           SelectionMode="None">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Border Padding="15" Margin="0,5" StrokeShape="RoundRectangle 10" BackgroundColor="#F9F9F9">
                            <VerticalStackLayout Spacing="8">
                                <Label Text="{Binding Category}" 
                                       FontSize="16" 
                                       FontAttributes="Bold"/>
                                <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                                    <Label Grid.Column="0"
                                          Text="{Binding BudgetText}"
                                          FontSize="14"/>
                                    <Label Grid.Column="1"
                                          Text="{Binding SpentText}"
                                          FontSize="14"
                                          FontAttributes="Bold"
                                          TextColor="{Binding StatusColor}"/>
                                </Grid>
                                <ProgressBar Progress="{Binding Progress}"
                                           ProgressColor="{Binding ProgressColor}"/>
                                <Label Text="{Binding PercentageText}"
                                      FontSize="12"
                                      TextColor="Gray"/>
                            </VerticalStackLayout>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>

